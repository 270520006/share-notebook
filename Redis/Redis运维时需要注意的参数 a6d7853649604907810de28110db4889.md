# Redis运维时需要注意的参数

1: 内存
# Memory
used_memory:859192 数据结构的空间
used_memory_rss:7634944 实占空间
mem_fragmentation_ratio:8.89 前2者的比例,1.N为佳,如果此值过大,说明redis的内存的碎片化严重,可以导出再导入一次.
2: 主从复制
# Replication
role:slave
master_host:192.168.1.128
master_port:6379
master_link_status:up

3:持久化
# Persistence
rdb_changes_since_last_save:0
rdb_last_save_time:1375224063

4: fork耗时
#Status
latest_fork_usec:936  上次导出rdb快照,持久化花费微秒
注意: 如果某实例有10G内容,导出需要2分钟,
每分钟写入10000次,导致不断的rdb导出,磁盘始处于高IO状态.

5: 慢日志
config get/set slowlog-log-slower-than
CONFIG get/SET slowlog-max-len 
slowlog get N 获取慢日志
 
运行时更改master-slave
修改一台slave(设为A)为new master 
1) 命令该服务不做其他redis服务的slave 
   命令: slaveof no one 
2) 修改其readonly为yes

其他的slave再指向new master A
1) 命令该服务为new master A的slave
   命令格式 slaveof IP port